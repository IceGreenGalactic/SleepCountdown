<!doctype html>
<html lang="no">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Sovetid ‚Äì Barnehage</title>
    <link rel="manifest" href="manifest.webmanifest">
    <meta name="theme-color" content="#0ea5e9">
    <link rel="icon" href="icons/icon-192.png" sizes="192x192">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="stylesheet" href="styles/main.css" />
</head>

<body>
    <header class="appbar">
        <h1>üçº Sovetid</h1>
        <div class="actions">
            <button id="installBtn" hidden>Installer</button>
            <button id="enableSoundBtn">Aktiver lyd</button>
            <button id="enableNotifBtn">Tillat varsler</button>

        </div>
    </header>

    <main class="container">
        <section class="card">
            <h2>Legg til / rediger barn</h2>
            <form id="childForm" autocomplete="off">
                <input type="hidden" id="childId" />
                <label>
                    Navn
                    <input id="name" required placeholder="F.eks. Nora" />
                </label>
                <label>
                    Maks sovetid (min)
                    <input id="maxMinutes" required type="number" min="1" step="1" placeholder="F.eks. 60" />
                </label>
                <div class="row">
                    <button type="submit" class="primary">Lagre</button>
                    <button type="button" id="cancelEditBtn" class="ghost" hidden>Avbryt</button>
                </div>
            </form>
            <p class="hint">Tips: ‚ÄúMaks sovetid‚Äù er slik foreldrene √∏nsker. Du kan alltid avslutte tidligere.</p>
        </section>

        <section class="card">
            <h2>Barne-liste</h2>
            <div id="list"></div>
            <template id="childRowTpl">
                <div class="child">
                    <div class="meta">
                        <div class="name"></div>
                        <div class="prefs"></div>
                        <div class="status"></div>
                        <div class="times"></div>
                    </div>
                    <div class="buttons">
                        <button class="startBtn">Sovnet n√•</button>
                        <button class="manualBtn">Manuell</button>
                        <button class="stopBtn" hidden>Avslutt</button>
                        <button class="editBtn">Rediger</button>
                        <button class="deleteBtn">Slett</button>
                    </div>
                </div>
            </template>
        </section>

        <div id="updateBanner" class="card update-banner" role="alert" aria-live="polite">
            <div class="update-row">
                <strong class="update-title">Ny versjon tilgjengelig</strong>
                <div class="update-actions">
                    <button id="reloadBtn" class="primary">Oppdater n√•</button>
                </div>
            </div>
        </div>



        <section class="card">
            <details class="details">
                <summary>Ofte stilte sp√∏rsm√•l</summary>
                <ul>
                    <li><strong>Lagring:</strong> Data lagres i <code>localStorage</code> og ligger der til
                        nettleserdata slettes.</li>
                    <li><strong>Lyd:</strong> Mobil-nettlesere krever et trykk f√∏rst. Bruk ‚ÄúAktiver lyd‚Äù.</li>
                    <li><strong>Varsler:</strong> Trykk ‚ÄúTillat varsler‚Äù for systemvarsel n√•r det er tid for oppv√•kning.
                    </li>
                    <li> <button id="checkUpdateBtn" class="ghost">Sjekk oppdatering</button>
                    </li>
                </ul>
            </details>
        </section>
    </main>

    <dialog id="manualDialog">
        <button id="manualCloseX" aria-label="Lukk" class="dialog-close">‚úï</button>
        <form method="dialog" id="manualForm">
            <h3>Manuell start</h3>
            <input type="hidden" id="manualChildId" />
            <label>
                Starttid (sovnet kl)
                <input id="manualStartTime" type="time" required />
            </label>
            <label>
                Minutter denne gangen (valgfritt)
                <input id="manualOverride" type="number" min="1" step="1" placeholder="Endre sovelengde" />
            </label>
            <div class="row">
                <button id="manualSave" class="primary">Start</button>
                <button id="manualCancel" class="ghost" value="cancel">Avbryt</button>
            </div>
        </form>
    </dialog>


    <footer class="footer">
        <small>¬© Kristine Tyrholm ‚Äì Sovetid PWA demo</small>
    </footer>

    <audio id="alarmAudio" src="sounds/soft_alarm.mp3" preload="auto"></audio>

    <script>
        window.VAPID_PUBLIC = "BCn94mAWWkTYkOwHORl0k3EyswuDZiEukFmmBldIx8TXAduxffKx9npcnbDV8YvrEzWlVWG5ihCP7W-fgD280Ko";
    </script>
    <script src="./app.js"></script>

</body>

</html>